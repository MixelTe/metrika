/*! For license information please see 598.537052a8.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmetrika=self.webpackChunkmetrika||[]).push([[598],{598:function(t,e,r){r.r(e),r.d(e,{default:function(){return ht}});var n=r(689),o=r(27),a=r(2);function i(){i=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),s=new D(n||[]);return o(i,"_invoke",{value:Q(t,r,s)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var p="suspendedStart",v="suspendedYield",y="executing",x="completed",g={};function m(){}function j(){}function b(){}var w={};d(w,u,(function(){return this}));var k=Object.getPrototypeOf,A=k&&k(k(H([])));A&&A!==r&&n.call(A,u)&&(w=A);var L=b.prototype=m.prototype=Object.create(w);function N(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function r(o,i,s,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==(0,a.Z)(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function Q(e,r,n){var o=p;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===x){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=E(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=x,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?x:v,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=x,n.method="throw",n.arg=c.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function V(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(V,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError((0,a.Z)(e)+" is not iterable")}return j.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:j,configurable:!0}),j.displayName=d(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===j||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,d(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},N(M.prototype),d(M.prototype,c,(function(){return this})),e.AsyncIterator=M,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new M(h(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},N(L),d(L,l,"Generator"),d(L,u,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=H,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:H(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function s(t,e,r,n,o,a,i){try{var s=t[a](i),u=s.value}catch(c){return void r(c)}s.done?e(u):Promise.resolve(u).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){s(a,n,o,i,u,"next",t)}function u(t){s(a,n,o,i,u,"throw",t)}i(void 0)}))}}var c=r(933);function l(){return(0,c.useQuery)("user",d)}function d(){return h.apply(this,arguments)}function h(){return(h=u(i().mark((function t(){var e,r,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/user");case 2:return e=t.sent,t.next=5,e.json();case 5:if(r=t.sent,401!=e.status){t.next=8;break}return t.abrupt("return",{auth:!1,id:-1,login:"",name:"",operations:[]});case 8:if(e.ok){t.next=10;break}throw r.msg;case 10:return(n=r).auth=!0,t.abrupt("return",n);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t,e){var r,n;return!(null===(r=t.data)||void 0===r||!r.auth||null===(n=t.data)||void 0===n||!n.operations.includes(v(e)))}function p(t){var e,r,n=l();return!(null===(e=n.data)||void 0===e||!e.auth||null===(r=n.data)||void 0===r||!r.operations.includes(v(t)))}function v(t){return"string"==typeof t?t:t[0]+"-"+t[1]}var y=r(283),x=r(791);function g(){var t=(0,n.TH)().pathname;return(0,x.useEffect)((function(){window.scrollTo(0,0)}),[t]),null}var m={root:"styles_root__4DGhY"},j=r(184);function b(){var t=(0,n.s0)();return(0,j.jsx)("div",{className:m.root,children:(0,j.jsx)("button",{onClick:function(){return t(-1)},children:"\u041d\u0430\u0437\u0430\u0434"})})}function w(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.filter((function(t){return!!t})).join(" ")}var k=r(87),A={root:"styles_root__Zvl9c",home:"styles_home__o+-s7",block:"styles_block__a1SM7"},L="data:image/png;base64,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";function N(t,e){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:void 0===e?null:JSON.stringify(e)})}function M(t){return Q.apply(this,arguments)}function Q(){return(Q=u(i().mark((function t(e){var r,n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N("/api/auth",e);case 2:return r=t.sent,t.next=5,r.json();case 5:if(n=t.sent,r.ok){t.next=8;break}throw n.msg;case 8:return(o=n).auth=!0,t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){return V.apply(this,arguments)}function V(){return(V=u(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N("/api/logout");case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(t){var e,r=t.backLink,o=(0,n.TH)(),a=(0,n.s0)(),i=function(){var t=(0,c.useQueryClient)();return(0,c.useMutation)({mutationFn:E,onSuccess:function(){t.invalidateQueries("user")}})}(),s=l();return(0,j.jsxs)("div",{className:A.root,children:[(0,j.jsxs)("span",{className:A.block,children:[(0,j.jsx)(k.rU,{to:"/",className:A.home,children:(0,j.jsx)("img",{src:L,alt:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})}),r&&(0,j.jsx)(k.rU,{to:r,children:(0,j.jsx)("button",{children:"\u041d\u0430\u0437\u0430\u0434"})}),"/"!=o.pathname&&!r&&(0,j.jsx)("button",{onClick:function(){return a(r||-1)},children:"\u041d\u0430\u0437\u0430\u0434"})]}),(0,j.jsxs)("span",{className:A.block,children:[(0,j.jsx)("span",{children:null===(e=s.data)||void 0===e?void 0:e.name}),(0,j.jsx)("button",{onClick:function(){return i.mutate()},disabled:"idle"!=i.status,children:"\u0412\u044b\u0439\u0442\u0438"})]}),"idle"!=i.status&&(0,j.jsx)(y.Z,{})]})}var D={root:"styles_root__xvR2N",body:"styles_body__S-p4X",body_centered:"styles_body_centered__NzRPU",body_centeredPage:"styles_body_centeredPage__R-EzO"};function H(t){var e=t.children,r=t.className,n=t.backLink,o=t.centered,a=void 0!==o&&o,i=t.centeredPage,s=void 0!==i&&i,u=t.height100,c=void 0!==u&&u,l=t.gap,d=void 0===l?0:l,h=t.header;return void 0===h&&(h=(0,j.jsx)(P,{backLink:n})),(0,j.jsxs)("div",{className:D.root,style:{maxHeight:c?"100dvh":""},children:[h||(0,j.jsx)("div",{}),(0,j.jsx)("div",{className:w(D.body,r,a&&D.body_centered,s&&D.body_centeredPage),style:{gap:d,maxHeight:c?"100%":""},children:e})]})}var S=r(433);function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Metrika";(0,x.useEffect)((function(){var r=document.title,n="object"!=typeof t?[t]:t;return document.title=[e].concat((0,S.Z)(n)).filter((function(t){return!!t})).join(" | "),function(){document.title=r}}),[t,e])}function C(){return O("404"),(0,j.jsx)(H,{centered:!0,header:(0,j.jsx)(b,{}),children:"\u0422\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435\u0442"})}function Z(){return O("403"),(0,j.jsx)(H,{centered:!0,header:(0,j.jsx)(b,{}),children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u043d\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"})}var Y=r(439),B={form:"styles_form__n7Rcu"};function T(){O("Auth");var t=(0,x.useState)(""),e=(0,Y.Z)(t,2),r=e[0],n=e[1],o=(0,x.useRef)(null),a=(0,x.useRef)(null),i=function(t){var e=(0,c.useQueryClient)();return(0,c.useMutation)({mutationFn:M,onSuccess:function(t){e.setQueryData("user",(function(){return t}))},onError:t})}(n);return(0,j.jsxs)(H,{header:null,centered:!0,centeredPage:!0,gap:"2em",children:[(0,j.jsx)("h1",{children:"Metrika"}),r&&(0,j.jsx)("h3",{children:r}),i.isLoading&&(0,j.jsx)(y.Z,{}),(0,j.jsxs)("form",{className:B.form,onSubmit:function(t){t.preventDefault(),function(){var t,e,r=(null===(t=o.current)||void 0===t?void 0:t.value)||"",n=(null===(e=a.current)||void 0===e?void 0:e.value)||"";i.mutate({login:r,password:n})}()},children:[(0,j.jsxs)("label",{children:[(0,j.jsx)("div",{children:"Login"}),(0,j.jsx)("input",{ref:o,type:"text",name:"login",required:!0})]}),(0,j.jsxs)("label",{children:[(0,j.jsx)("div",{children:"Password"}),(0,j.jsx)("input",{ref:a,type:"password",name:"password",required:!0})]}),(0,j.jsx)("button",{type:"submit",disabled:"loading"==i.status,children:"Log in"})]})]})}function J(t){return(0,c.useQuery)(["app","".concat(t)],(function(){return function(t){return U.apply(this,arguments)}(t)}))}function q(){return z.apply(this,arguments)}function z(){return(z=u(i().mark((function t(){var e,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/apps");case 2:return e=t.sent,t.next=5,e.json();case 5:if(r=t.sent,e.ok){t.next=8;break}throw r.msg;case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(){return(U=u(i().mark((function t(e){var r,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/app/"+e);case 2:return r=t.sent,t.next=5,r.json();case 5:if(n=t.sent,r.ok){t.next=8;break}throw n.msg;case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(t){return G.apply(this,arguments)}function G(){return(G=u(i().mark((function t(e){var r,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N("/api/app",e);case 2:return r=t.sent,t.next=5,r.json();case 5:if(n=t.sent,r.ok){t.next=8;break}throw n.msg;case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var I={root:"styles_root__O0923",open:"styles_open__35Vcu",popup:"styles_popup__L-0H0",header:"styles_header__o87wG",close:"styles_close__w0Yhz",body:"styles_body__t75Nd"};function X(t){var e=t.children,r=t.open,n=void 0!==r&&r,o=t.close,a=t.title,i=void 0===a?"":a;return(0,j.jsx)("div",{className:w(I.root,n&&I.open),children:(0,j.jsxs)("div",{className:I.popup,children:[(i||o)&&(0,j.jsxs)("div",{className:I.header,children:[(0,j.jsx)("h3",{children:i}),o&&(0,j.jsx)("button",{className:I.close,onClick:o,children:"\u2716"})]}),(0,j.jsx)("div",{className:I.body,children:e})]})})}function R(){var t,e=(0,x.useState)(!1),r=(0,Y.Z)(e,2),n=r[0],o=r[1],a=(0,x.useRef)(null),i=(0,c.useQuery)("apps",q),s=function(){var t=(0,c.useQueryClient)();return(0,c.useMutation)({mutationFn:F,onSuccess:function(e){var r;"success"==(null===(r=t.getQueryState("apps"))||void 0===r?void 0:r.status)&&t.setQueryData("apps",(function(t){return t?[].concat((0,S.Z)(t),[e]):[e]}))}})}();return(0,j.jsxs)(H,{centeredPage:!0,gap:"1em",children:[i.isLoading&&(0,j.jsx)(y.Z,{}),s.isLoading&&(0,j.jsx)(y.Z,{}),(0,j.jsx)("h1",{children:"Your Apps"}),i.isError&&"".concat(i.error),null===(t=i.data)||void 0===t?void 0:t.map((function(t){return(0,j.jsxs)(k.rU,{to:"/app/"+t.id,children:[(0,j.jsx)("div",{children:t.name}),(0,j.jsx)("div",{children:t.code})]},t.code)})),p("add_app")&&(0,j.jsx)("button",{onClick:function(){return o(!0)},children:"Add app"}),(0,j.jsx)(X,{title:"Add new App",open:n,close:function(){return o(!1)},children:(0,j.jsxs)("form",{onSubmit:function(t){t.preventDefault(),a.current&&""!=a.current.value&&s.mutate({name:a.current.value},{onSuccess:function(){return o(!1)}})},children:[s.isError&&"".concat(s.error),(0,j.jsxs)("label",{children:[(0,j.jsx)("div",{children:"Name"}),(0,j.jsx)("input",{type:"text",ref:a})]}),(0,j.jsx)("button",{type:"submit",children:"Submit"})]})})]})}var K=r(142);function W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(Object(r),!0).forEach((function(e){var n,o,a;n=t,o=e,a=r[e],(o=(0,K.Z)(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var $={root:"styles_root__b8elC",charts:"styles_charts__ok6uR"};function tt(t,e){return"".concat(t).padStart(e,"0")}function et(t){return t?"".concat(t.getFullYear(),"-").concat(tt(t.getMonth()+1,2),"-").concat(tt(t.getDate(),2)):""}function rt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="".concat(tt(t.getHours(),2),":").concat(tt(t.getMinutes(),2));return e?r+":".concat(tt(t.getSeconds(),2)):r}function nt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(t){return t?"".concat(tt(t.getDate(),2),".").concat(tt(t.getMonth()+1,2),".").concat(t.getFullYear()):""}(t)+" "+rt(t,e)}function ot(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return et(t)+"T"+rt(t,e)}function at(t,e){return(0,c.useQuery)(["stats","".concat(t),e],(function(){return function(t,e){return st.apply(this,arguments)}(t,e)}))}function it(t,e){return(0,c.useQuery)(["statsVisitors","".concat(t),e],(function(){return function(t,e){return ut.apply(this,arguments)}(t,e)}))}function st(){return(st=u(i().mark((function t(e,r){var n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/stats/"+e+"?group=".concat(r.group,"&type=").concat(r.type,"&start=").concat(ot(r.start),"&end=").concat(ot(r.end),"&new=").concat(r.newVisitors?1:0));case 2:return n=t.sent,t.next=5,n.json();case 5:if(o=t.sent,n.ok){t.next=8;break}throw o.msg;case 8:return t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ut(){return(ut=u(i().mark((function t(e,r){var n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/stats/visitors/"+e+"?start=".concat(ot(r.start),"&end=").concat(ot(r.end),"&new=").concat(r.newVisitors?1:0));case 2:return n=t.sent,t.next=5,n.json();case 5:if(o=t.sent,n.ok){t.next=8;break}throw o.msg;case 8:return t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ct={root:"styles_root__8HKQN",desc:"styles_desc__yBoR9"};function lt(t){var e,r,n=t.data,o=t.title,a=t.valuesSum,i=(0,x.useState)(-1),s=(0,Y.Z)(i,2),u=s[0],c=s[1],l=0==n.length;n.forEach((function(t){1==t.values.length&&(t.values=[t.values[0],t.values[0]])}));var d=n.reduce((function(t,e){return Math.max(t,e.values.reduce((function(t,e){return Math.max(t,e.value)}),0))}),0),h=300,f=100,p=10,v=[{fill:"rgba(139, 255, 84, 0.2)",stroke:"rgb(139, 197, 84)"},{fill:"rgba(253, 204, 53, 0.2)",stroke:"rgb(253, 204, 53)"},{fill:"rgba(253, 90, 62, 0.2)",stroke:"rgb(253, 90, 62)"},{fill:"rgba(119, 182, 231, 0.2)",stroke:"rgb(119, 182, 231)"},{fill:"rgba(169, 85, 184, 0.2)",stroke:"rgb(169, 85, 184)"},{fill:"rgba(92, 170, 56, 0.2)",stroke:"rgb(92, 170, 56)"},{fill:"rgba(168, 136, 35, 0.2)",stroke:"rgb(168, 136, 35)"},{fill:"rgba(168, 60, 41, 0.2)",stroke:"rgb(168, 60, 41)"},{fill:"rgba(79, 121, 154, 0.2)",stroke:"rgb(79, 121, 154)"},{fill:"rgba(112, 56, 122, 0.2)",stroke:"rgb(112, 56, 122)"}],y=(null===(e=n[0])||void 0===e||null===(r=e.values)||void 0===r?void 0:r.length)||0,g=h/(y-1),m=function(t){return Math.round(t*g+p)},b=function(t,e){return{x:m(e),x1:m(Math.max(e-.5,0)),x2:m(Math.min(e+.5,y-1)),y:Math.round((1-t/d)*f+p)}},w={y:b(d,0).y,label:d},k=1==d?.5:Math.floor(d/2),A={y:b(k,0).y,label:k};return(0,j.jsxs)("div",{className:ct.root,children:[(0,j.jsx)("h3",{children:o}),(0,j.jsx)("svg",{width:320,height:120,onMouseMove:function(t){var e=t.nativeEvent.offsetX-p;c(Math.min(Math.max(Math.round(e/g),0),y-1))},onMouseLeave:function(){return c(-1)},children:l?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("text",{x:150,y:50,children:"No data"})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("line",{x1:0,x2:320,y1:w.y,y2:w.y,strokeWidth:1,stroke:"#00000040"}),(0,j.jsx)("text",{x:2,y:w.y+12,fontSize:12,children:w.label}),(0,j.jsx)("line",{x1:0,x2:320,y1:A.y,y2:A.y,strokeWidth:1,stroke:"#00000040"}),(0,j.jsx)("text",{x:2,y:A.y+12,fontSize:12,children:A.label}),n.map((function(t,e){if(0==t.values.length)return null;var r=t.values.map((function(t,e){return b(t.value,e)})),n=v[e]||v[0];return(0,j.jsx)("path",{fill:n.fill,stroke:n.stroke,strokeWidth:2,d:"M".concat(r.map((function(t){return"".concat(t.x1,",").concat(t.y,"L").concat(t.x2,",").concat(t.y)})).join(" L")," L").concat(310,",").concat(120," L").concat(p,",").concat(120," L").concat(r[0].x,",").concat(r[0].y)},e)})),u>=0&&(0,j.jsx)("line",{x1:u*g+p,x2:u*g+p,y1:0,y2:120,strokeWidth:1,stroke:"gray"})]})}),n.map((function(t,e){var r,n,o=t.values.reduce((function(t,e){return t+e.value}),0);return(0,j.jsxs)("div",{className:ct.desc,children:[(0,j.jsx)("div",{children:t.label}),(0,j.jsx)("div",{children:u<0?t.avarege&&(Math.round(o/y*10)/10||0):null===(r=t.values[u])||void 0===r?void 0:r.label}),(0,j.jsx)("div",{children:u<0?a||o||0:null===(n=t.values[u])||void 0===n?void 0:n.value})]},e)}))]})}function dt(){var t,e,r=(0,x.useState)((function(){var t=new Date;return t.setHours(0,0,0,0),t.setDate(t.getDate()-1),t})),o=(0,Y.Z)(r,2),a=o[0],i=o[1],s=(0,x.useState)((function(){var t=new Date;return t.setHours(0,0,0,0),t})),u=(0,Y.Z)(s,2),c=u[0],l=u[1],d=(0,x.useState)("hour"),h=(0,Y.Z)(d,2),f=h[0],p=h[1],v=((0,n.TH)(),(0,n.UO)().appId),g=J(v);O([(null===(t=g.data)||void 0===t?void 0:t.name)||"App"]);var m={group:f,type:"requests",start:a,end:function(){var t=new Date(c);return t.setDate(t.getDate()+1),t}()},b=at(v,_(_({},m),{},{type:"requests"})),w=at(v,_(_({},m),{},{type:"visitors"})),k=at(v,_(_({},m),{},{type:"visitors",newVisitors:!0})),A=at(v,_(_({},m),{},{type:"fromTag"})),L=it(v,m),N=it(v,_(_({},m),{},{newVisitors:!0}));function M(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.data;return(null===r||void 0===r?void 0:r.map((function(t){var r=t.values,n=new Date(a),o=new Date(c);n.setHours(0),o.setHours(24);var i=new Date;i.setMinutes(10*Math.floor(i.getMinutes()/10+1),0,0);var s=+n,u=+(o<i?o:i),l={minute:6e5,hour:36e5,day:864e5}[f];return{label:t.label,avarege:e,values:((null===r||void 0===r?void 0:r.map((function(t){return{value:t.count,label:t.date}})))||[]).reduce((function(t,e,n){var o=new Date(e.label);e.label=nt(o);for(var a=+o;a>s;)t.push({value:0,label:nt(new Date(s))}),s+=l;for(s+=l,t.push(e);n+1==(null===r||void 0===r?void 0:r.length)&&s<u;)t.push({value:0,label:nt(new Date(s))}),s+=l;return t}),[])}})))||[]}return(0,j.jsxs)(H,{centeredPage:!0,gap:"1em",backLink:"/",children:[(g.isLoading||b.isLoading||w.isLoading||A.isLoading)&&(0,j.jsx)(y.Z,{}),g.isError&&"app: ".concat(g.error),b.isError&&"stats_requests: ".concat(b.error),w.isError&&"stats_visitors: ".concat(w.error),A.isError&&"stats_visits: ".concat(A.error),L.isError&&"visitors: ".concat(L.error),(0,j.jsx)("h1",{children:null===(e=g.data)||void 0===e?void 0:e.name}),(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{children:"Period: "}),(0,j.jsxs)("label",{children:[(0,j.jsx)("span",{children:"Start: "}),(0,j.jsx)("input",{type:"date",value:et(a),onChange:function(t){return i((function(e){return t.target.valueAsDate||e}))}})]}),(0,j.jsxs)("label",{children:[(0,j.jsx)("span",{children:"End: "}),(0,j.jsx)("input",{type:"date",value:et(c),onChange:function(t){return l((function(e){return t.target.valueAsDate||e}))}})]}),(0,j.jsxs)("label",{children:[(0,j.jsx)("span",{children:"Group: "}),(0,j.jsxs)("select",{value:f,onChange:function(t){return p(t.target.value)},children:[(0,j.jsx)("option",{value:"minute",children:"10 Minutes"}),(0,j.jsx)("option",{value:"hour",children:"Hour"}),(0,j.jsx)("option",{value:"day",children:"Day"})]})]})]}),(0,j.jsxs)("div",{className:$.charts,children:[(0,j.jsx)(lt,{title:"Requests",data:M(b)}),(0,j.jsx)(lt,{title:"Visitors",valuesSum:L.data,data:M(w)}),(0,j.jsx)(lt,{title:"New visitors",valuesSum:N.data,data:M(k)}),(0,j.jsx)(lt,{title:"From tag",data:M(A,!1)})]}),(0,j.jsx)("div",{children:(0,j.jsx)("button",{onClick:function(){var t,e=window.location.host,r='<script defer src="https://'.concat(e,"/api/script?app=").concat(null===(t=g.data)||void 0===t?void 0:t.code,'"><\/script>');navigator.clipboard.writeText(r)},children:"Copy script"})})]})}function ht(){var t,e=l(),r=(0,n.TH)().pathname,a=function(t,e){var n;return(null===(n=(0,o.LX)(t,r))||void 0===n?void 0:n.params[e])||""};function i(t,r,o){var i;return(0,j.jsx)(n.AW,{path:r,element:null!==(i=e.data)&&void 0!==i&&i.auth?null==t||f(e,"string"==typeof t?t:[t[0],a(r,t[1])])?o:(0,j.jsx)(Z,{}):(0,j.jsx)(n.Fg,{to:"/auth"})})}return(0,j.jsxs)("div",{className:"root",children:[(0,j.jsx)(g,{}),e.isLoading&&(0,j.jsx)(y.Z,{}),e.isError&&"\u041e\u0448\u0438\u0431\u043a\u0430",e.isSuccess&&(0,j.jsxs)(n.Z5,{children:[(0,j.jsx)(n.AW,{path:"/auth",element:null!==(t=e.data)&&void 0!==t&&t.auth?(0,j.jsx)(n.Fg,{to:"/"}):(0,j.jsx)(T,{})}),i(null,"/",(0,j.jsx)(R,{})),i(["view_app","appId"],"/app/:appId",(0,j.jsx)(dt,{})),i(null,"*",(0,j.jsx)(C,{}))]})]})}}}]);
//# sourceMappingURL=598.537052a8.chunk.js.map